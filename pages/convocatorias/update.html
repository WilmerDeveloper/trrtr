<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>::Convocatorias::</title>

        <!-- Bootstrap Core CSS -->
        <link href="../../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

        <!-- MetisMenu CSS -->
        <link href="../../vendor/metisMenu/metisMenu.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="../../dist/css/sb-admin-2.css" rel="stylesheet">

        <!-- Custom Fonts -->
        <link href="../../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <!-- validator bootstrap -->
        <link href='../../dist/libraries/bootstrap-validator/bootstrapValidator.css' rel='stylesheet'>                

        <!-- Bootstrap animate -->
        <link href="../../dist/libraries/bootstrap-notify-3.1.3/animate.css" rel="stylesheet" type="text/css"/>
        
        <!-- Text area editor html -->
        <link type="text/css" rel="stylesheet" href="../../dist/libraries/jQuery-TE_v.1.4.0/jquery-te-1.4.0.css">
        
        <!-- css principales de la aplicacion -->
        <link href="../../dist/css/main.css" rel="stylesheet" type="text/css"/>
    </head>

    <body>
        <!-- Modal que se activa cuando se realiza cualquier peticion ajax -->
        <div class="modal fade" id="my_loader" role="dialog">
          <div class="modal-dialog">    
                <div class="loader" style="margin: 0 auto;"></div>             
          </div>
        </div>
        <div id="wrapper">

            <!-- Navigation -->
            <nav id="menu_principal" class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            </nav>

            <div id="page-wrapper">                
                <div class="row">                    
                    <div class="col-lg-12">                         
                        <h1 class="page-header">Convocatorias</h1>
                    </div>
                    <div class="panel-body" style="text-align: right">                    
                        <button type="button" class="btn btn-default btn-circle btn-lg" onclick="location.href = 'list.html'"><i class="fa fa-arrow-left"></i>
                        </button>
                        <button type="button" class="btn btn-primary btn-circle btn-lg" onclick="location.href = 'list.html'"><i class="fa fa-list"></i>
                        </button>
                        <button type="button" class="btn btn-success btn-circle btn-lg" onclick="location.href = 'form.html'"><i class="fa fa-file-o"></i>
                        </button>                        
                    </div>
                    <!-- /.col-lg-12 -->
                </div>
                <!-- /.row -->
                <div class="row">                    
                    <div class="col-lg-12">
                        <div class="panel panel-default">                            
                            <div class="panel-heading">
                                Formulario de la convocatoria
                            </div>
                            <div class="panel-body">                                
                                <form id="form_validator" action="" class="form_validator" role="form" method="post">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="form-group">
                                                <label>Estado <span class="icono_requerido">*</span></label>
                                                <select id='estado' name="estado" class="form-control" tabindex="1">                                                    
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                            
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Entidad <span class="icono_requerido">*</span></label>
                                                <select id='entidad' name="entidad" class="form-control" tabindex="1">                                                    
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                            
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Tipo de programa <span class="icono_requerido">*</span></label>
                                                <select id='programa' name="programa" class="form-control" tabindex="1">                                                    
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                                                                                                                                                                                                                        
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>AÃ±o <span class="icono_requerido">*</span></label>
                                                <select id='anio' name="anio" class="form-control" tabindex="1">
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                            
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Nombre de la convocatoria <span class="icono_requerido">*</span></label>
                                                <input type="text" name="nombre" class="form-control">                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                                                                    
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>DescripciÃ³n corta de la convocatoria <span class="icono_requerido">*</span></label>
                                                <textarea id="descripcion" name="descripcion" class="form-control textarea_html" rows="3"></textarea>                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                            
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>JustificaciÃ³n de la convocatoria <span class="icono_requerido">*</span></label>
                                                <textarea id="justificacion" name="justificacion" class="form-control textarea_html" rows="3"></textarea>                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                                                                    
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div id="quienes_pueden_participar" class="form-group" style="text-align: center">

                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                                                                                                                                                                                                                       
                                    </div>
                                    <h3>InformaciÃ³n general de la convocatoria</h3>                                    
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Modalidad <span class="icono_requerido">*</span></label>
                                                <select id='modalidad' name="modalidad" class="form-control" tabindex="1">                                                    
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div> 
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Cobertura <span class="icono_requerido">*</span></label>
                                                <select id='cobertura' name="cobertura" class="form-control" tabindex="1">                                                    
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Localidad</label>
                                                <select disabled="disabled" id='localidad' name="localidad" class="form-control class_descripcion_ejecucion" tabindex="1">                                                    
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                                                                    
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Upz</label>
                                                <select disabled="disabled" id='upz' name="upz" class="form-control class_descripcion_ejecucion" tabindex="1">                                                    
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>  
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Barrio</label>
                                                <select disabled="disabled" id='barrio' name="barrio" class="form-control class_descripcion_ejecucion" tabindex="1">                                                    
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                                                                    
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>DescripciÃ³n de la ubicaciÃ³n de la ejecuciÃ³n (Territorios priorizados)</label>
                                                <textarea disabled="disabled" id="descripcion_ejecucion" name="descripcion_ejecucion" class="form-control class_descripcion_ejecucion" rows="3"></textarea>
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div> 
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Enfoque <span class="icono_requerido">*</span></label>
                                                <select id='enfoque' name="enfoque" class="form-control" tabindex="1">                                                    
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                                                                    
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>LÃ­nea estratÃ©gica <span class="icono_requerido">*</span></label>
                                                <select id='linea_estrategica' name="linea_estrategica" class="form-control" tabindex="1">                                                    
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>  
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Ãrea <span class="icono_requerido">*</span></label>
                                                <select id='area' name="area" class="form-control" tabindex="1">                                                    
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                                                                    
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Â¿La convocatoria se presenta a travÃ©s de seudÃ³nimo?</label>
                                                <select id='seudonimo' name="seudonimo" class="form-control" tabindex="1">                                                    
                                                    <option value="true">SÃ­</option>
                                                    <option value="false" selected="selected">No</option>
                                                </select>                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>  
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Â¿Tiene categorias?</label>
                                                <select id='tiene_categorias' name="tiene_categorias" class="form-control" tabindex="1">                                                    
                                                    <option value="true">SÃ­</option>
                                                    <option value="false" selected="selected">No</option>
                                                </select>                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                                                                    
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Â¿Las categorÃ­as manejan diferentes requisitos y/o fechas?</label>
                                                <select id='diferentes_categorias' name="diferentes_categorias" class="form-control tiene_categorias" tabindex="1">                                                    
                                                    <option value="true">SÃ­</option>
                                                    <option value="false" selected="selected">No</option>
                                                </select>                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div> 
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Â¿Los jurados para esta convocatoria, son los mismos para sus diferentes categorÃ­as?</label>
                                                <select id='mismos_jurados_categorias' name="mismos_jurados_categorias" class="form-control tiene_categorias" tabindex="1">                                                    
                                                    <option value="true">SÃ­</option>
                                                    <option value="false" selected="selected">No</option>
                                                </select>                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                                                                    
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Esta convocatoria tendrÃ¡ <br/>seguimiento?</label>
                                                <select id='seguimiento' name="seguimiento" class="form-control tiene_categorias" tabindex="1">                                                    
                                                    <option value="true" selected="selected">SÃ­</option>
                                                    <option value="false">No</option>
                                                </select>                                                                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="form-group">
                                                <label>Â¿CuÃ¡ntos perfiles de jurado requiere? <span class="icono_requerido">*</span></label>
                                                <select id='cantidad_perfil_jurado' name="cantidad_perfil_jurado" class="form-control" tabindex="1">                                                    
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>                                                                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                                                                                                                                    
                                    </div>
                                    <h3>InformaciÃ³n del convenio</h3>                                    
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Â¿Esta convocatoria tiene convenio?</label><br/>
                                                <label class="radio-inline">
                                                    <input type="radio" name="convenio" value="true" /> SÃ­
                                                </label>
                                                <label class="radio-inline">
                                                    <input type="radio" name="convenio" value="false" checked="checked" /> No
                                                </label>                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div> 
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Tipo de convenio (InstituciÃ³n) </label>
                                                <select disabled="disabled" class="form-control class_convenio" id='tipo_convenio' name="tipo_convenio" tabindex="1">                                                    
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="form-group">
                                                <label>Nombre de la(s) instituciÃ³n(es) con la cual se hizo convenio</label>
                                                <input disabled="disabled" class="form-control class_convenio" type="text" name="convenio_instituciones">                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                         
                                    </div>
                                    <h3>InformaciÃ³n general de los recursos a otorgar</h3>                                    
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Tipo de estÃ­mulo <span class="icono_requerido">*</span></label>
                                                <select class="form-control" id='tipo_estimulo' name="tipo_estimulo" tabindex="1">                                                    
                                                    <option value="">:: Seleccionar ::</option>
                                                </select>                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                         
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>NÃºmero de estÃ­mulos</label>
                                                <input type="text" name="numero_estimulos" class="form-control">                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                         
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Valor total de recursos que entregarÃ¡ la convocatoria <span class="icono_requerido">*</span></label>
                                                <input type="text" name="valor_total_estimulos" class="form-control">                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                         
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>Bolsa Concursable</label><br/>
                                                <label class="radio-inline">
                                                    <input type="radio" name="bolsa_concursable" value="true" /> SÃ­
                                                </label>
                                                <label class="radio-inline">
                                                    <input type="radio" name="bolsa_concursable" value="false" checked="checked" /> No
                                                </label>                                              
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                         
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="form-group">
                                                <label>DescripciÃ³n de la distribuciÃ³n de la bolsa</label>
                                                <textarea disabled="disabled" id="descripcion_bolsa" name="descripcion_bolsa" class="form-control class_bolsa_concursable" rows="3"></textarea>                                                
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>                                          
                                    </div>

                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>&nbsp;</label><br/>
                                                <button disabled="disabled" type="button" class="btn btn-primary class_bolsa_concursable" data-toggle="modal" data-target="#distribucion_bolsa_modal" tabindex="7">Abrir ventana de distribuciÃ³n de la bolsa</button>
                                            </div>                                                                                                                                                                                                                                                                                                      
                                        </div>                                         
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>&nbsp;</label><br/>
                                                <button disabled="disabled" type="button" class="btn btn-primary class_tipo_estimulo" data-toggle="modal" data-target="#detalle_especie_modal" tabindex="7">Abrir ventana de detalle especie</button>
                                            </div>                                                                                                                                                                                                                                                                                                       
                                        </div>                                         
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="form-group">
                                                <label>Objeto <span class="icono_requerido">*</span></label>
                                                <textarea id="objeto" name="objeto" class="form-control textarea_html" rows="3"></textarea>
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="form-group">
                                                <label>QuiÃ©nes no pueden participar <span class="icono_requerido">*</span></label>
                                                <textarea id="no_pueden_participar" name="no_pueden_participar" class="form-control textarea_html" rows="3"></textarea>
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="form-group">
                                                <label>Derechos especÃ­ficos de los ganadores <span class="icono_requerido">*</span></label>
                                                <textarea id="derechos_ganadores" name="derechos_ganadores" class="form-control textarea_html" rows="3"></textarea>
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="form-group">
                                                <label>Deberes especÃ­ficos de los ganadores <span class="icono_requerido">*</span></label>
                                                <textarea id="deberes_ganadores" name="deberes_ganadores" class="form-control textarea_html" rows="3"></textarea>
                                            </div>                                                                                                                                                                                                                                                                                                        
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>&nbsp;</label><br/>
                                                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#perfiles_participantes_modal" tabindex="7">Abrir ventana de perfiles de los participantes</button>
                                            </div>                                                                                                                                                                                                                                                                                                      
                                        </div>                                         
                                        <div class="col-lg-6">
                                            <div class="form-group">
                                                <label>&nbsp;</label><br/>
                                                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#perfiles_jurados_modal" tabindex="7">Abrir ventana de perfiles de los jurados</button>
                                            </div>                                                                                                                                                                                                                                                                                                       
                                        </div>                                         
                                    </div>

                                    <div class="row">
                                        <div class="col-lg-12" style="text-align: right">
                                            <input type="hidden" id="id" name="id" />
                                            <button type="submit" class="btn btn-default">Guardar</button>                                            
                                        </div>
                                    </div>                                                                                                                
                                </form>                                
                                <div class="modal fade" id="distribucion_bolsa_modal">
                                    <div class="modal-dialog">
                                        <div class="modal-content">

                                            <!-- cabecera del diÃ¡logo -->
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                <h4 class="modal-title">DistribuciÃ³n de la bolsa</h4>                                                    
                                            </div>

                                            <!-- cuerpo del diÃ¡logo -->
                                            <div class="modal-body">
                                                <form id="form_validator_bolsa" action="" class="form_validator" role="form" method="post">
                                                    <div class="row">
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label>NÃºmero de estÃ­mulos a otorgar</label>
                                                                <input type="text" name="nombre" class="form-control">                                                
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>                                                                                                            
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label>Valor individual por estÃ­mulo</label>
                                                                <input type="text" name="nombre" class="form-control">                                                
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>                                                                                                                                                    
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-12" style="text-align: right">                                                        
                                                            <button type="submit" class="btn btn-default">Guardar</button>
                                                        </div>
                                                    </div>
                                                    <br/>
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div class="panel panel-default">
                                                                <div class="panel-body">
                                                                    <div class="table-responsive">
                                                                        <table class="table">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>NÃºmero de estÃ­mulos a otorgar</th>
                                                                                    <th>Valor individual por estÃ­mulo</th>                                                                                    
                                                                                    <th>Acciones</th>                                                                                    
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr>
                                                                                    <td>1</td>
                                                                                    <td>$ 200.000</td>                                                                                                                                                                        
                                                                                    <td>
                                                                                        <button type="button" class="btn btn-warning" onclick="form_edit(3)"><span class="glyphicon glyphicon-edit"></span></button><button type="button" class="btn btn-danger" onclick="form_del(3)"><span class="glyphicon glyphicon-remove"></span></button><div></div>
                                                                                    </td>
                                                                                </tr>                                                                                
                                                                                <tr>
                                                                                    <td>2</td>
                                                                                    <td>$ 130.000</td>                                                                                                                                                                        
                                                                                    <td>
                                                                                        <button type="button" class="btn btn-warning" onclick="form_edit(3)"><span class="glyphicon glyphicon-edit"></span></button><button type="button" class="btn btn-danger" onclick="form_del(3)"><span class="glyphicon glyphicon-remove"></span></button><div></div>
                                                                                    </td>
                                                                                </tr>                                                                                
                                                                                <tr>
                                                                                    <td>3</td>
                                                                                    <td>$ 100.000</td>   
                                                                                    <td>
                                                                                        <button type="button" class="btn btn-warning" onclick="form_edit(3)"><span class="glyphicon glyphicon-edit"></span></button><button type="button" class="btn btn-danger" onclick="form_del(3)"><span class="glyphicon glyphicon-remove"></span></button><div></div>
                                                                                    </td>
                                                                                </tr>                                                                                
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                    <!-- /.table-responsive -->
                                                                </div>
                                                                <!-- /.panel-body -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="modal fade" id="detalle_especie_modal">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <!-- cabecera del diÃ¡logo -->
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                <h4 class="modal-title">Detalle especie</h4>                                                    
                                            </div>

                                            <!-- cuerpo del diÃ¡logo -->
                                            <div class="modal-body">
                                                <form id="form_validator_bolsa" action="" class="form_validator" role="form" method="post">
                                                    <div class="row">
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label>Orden</label>
                                                                <input type="text" name="nombre" class="form-control">                                                
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>                                                                                                            
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label>Tipo de estÃ­mulo no pecuniario</label>
                                                                <input type="text" name="nombre" class="form-control">                                                
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>                                                                                                                                                    
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label>ValoraciÃ³n de recursos no pecuniarios</label>
                                                                <input type="text" name="nombre" class="form-control">                                                
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>                                                                                                            
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label>DescripciÃ³n del recurso no pecuniario</label>
                                                                <textarea  name="descripcion" class="form-control" rows="3"></textarea>
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>                                                                                                                                                    
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-12" style="text-align: right">                                                        
                                                            <button type="submit" class="btn btn-default">Guardar</button>
                                                        </div>
                                                    </div>
                                                    <br/>
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div class="panel panel-default">
                                                                <div class="panel-body">
                                                                    <div class="table-responsive">
                                                                        <table class="table">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>Orden</th>
                                                                                    <th>Tipo de estÃ­mulo no pecuniario</th>                                                                                    
                                                                                    <th>ValoraciÃ³n de recursos no pecuniarios</th>                                                                                    
                                                                                    <th>DescripciÃ³n del recurso no pecuniario</th>                                                                                    
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr>
                                                                                    <td>1</td>
                                                                                    <td>Beca de estudios</td>
                                                                                    <td>$ 150.000</td>
                                                                                    <td>Descripcion</td>                                                                                                                                                                        
                                                                                    <td>
                                                                                        <button type="button" class="btn btn-warning" onclick="form_edit(3)"><span class="glyphicon glyphicon-edit"></span></button><button type="button" class="btn btn-danger" onclick="form_del(3)"><span class="glyphicon glyphicon-remove"></span></button><div></div>
                                                                                    </td>
                                                                                </tr>                                                                                
                                                                                <tr>
                                                                                    <td>2</td>
                                                                                    <td>Catalogo virtual</td>                                                                                                                                                                        
                                                                                    <td>$ 140.000</td>
                                                                                    <td>Descripcion</td>
                                                                                    <td>
                                                                                        <button type="button" class="btn btn-warning" onclick="form_edit(3)"><span class="glyphicon glyphicon-edit"></span></button><button type="button" class="btn btn-danger" onclick="form_del(3)"><span class="glyphicon glyphicon-remove"></span></button><div></div>
                                                                                    </td>
                                                                                </tr>                                                                                
                                                                                <tr>
                                                                                    <td>3</td>
                                                                                    <td>Pasantia</td> 
                                                                                    <td>$ 130.000</td>
                                                                                    <td>Descripcion</td>
                                                                                    <td>
                                                                                        <button type="button" class="btn btn-warning" onclick="form_edit(3)"><span class="glyphicon glyphicon-edit"></span></button><button type="button" class="btn btn-danger" onclick="form_del(3)"><span class="glyphicon glyphicon-remove"></span></button><div></div>
                                                                                    </td>
                                                                                </tr>                                                                                
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                    <!-- /.table-responsive -->
                                                                </div>
                                                                <!-- /.panel-body -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="modal fade" id="perfiles_jurados_modal">
                                    <div class="modal-dialog" style="width: 60%">
                                        <div class="modal-content">

                                            <!-- cabecera del diÃ¡logo -->
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                <h4 class="modal-title">Perfiles de los jurados</h4>                                                    
                                            </div>

                                            <!-- cuerpo del diÃ¡logo -->
                                            <div class="modal-body" style="height: 450px; overflow-y: auto;">
                                                <form id="form_validator_jurado" action="" class="form_validator_jurado" role="form" method="post">
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div class="form-group">
                                                                <label>Jurado numero <span class="icono_requerido">*</span></label>
                                                                <select id='orden_perfil_jurado' name="orden" class="form-control validacion_general" tabindex="1">                                                    
                                                                    <option value="">:: Seleccionar ::</option>
                                                                </select>
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>                                                                                                            
                                                        <div class="col-lg-12">
                                                            <div class="form-group">
                                                                <label>Perfil. Describa de manera clara y breve las caracterÃ­sticas bÃ¡sicas de conocimiento, formaciÃ³n, experiencia y trayectoria que debe tener el jurado  <span class="icono_requerido">*</span></label>
                                                                <textarea id="descripcion_perfil" name="descripcion_perfil" class="form-control" rows="3"></textarea>                                                
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>                                                                                                            
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label>Â¿El jurado debe tener formaciÃ³n profesional universitaria?</label><br/>
                                                                <select id='formacion_profesional' name="formacion_profesional" class="form-control validacion_general" tabindex="1">                                                    
                                                                    <option value="">:: Seleccionar ::</option>
                                                                    <option value="true">SÃ­</option>
                                                                    <option value="false">No</option>
                                                                </select>                                                                
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label>Ãrea(s) de conocimiento</label>
                                                                <select id="area_conocimiento" class="form-control validacion_general" name="area_conocimiento[]" multiple="multiple">                                                                                                                        
                                                                </select>
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label>Â¿El jurado debe tener formaciÃ³n de posgrado?</label><br/>
                                                                <select id='formacion_postgrado' name="formacion_postgrado" class="form-control validacion_general" tabindex="1">                                                    
                                                                    <option value="">:: Seleccionar ::</option>
                                                                    <option value="true">SÃ­</option>
                                                                    <option value="false">No</option>
                                                                </select>                                                                                                                                                                              
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label>Nivel de formaciÃ³n de posgrado</label>
                                                                <select id="nivel_educativo" class="form-control validacion_general" name="nivel_educativo[]" multiple="multiple">                                                                                                                        
                                                                </select>
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>
                                                        <div class="col-lg-12">
                                                            <div class="form-group">
                                                                <label>Campo(s) de experiencia o trayectoria</label>
                                                                <textarea id="campo_experiencia" name="campo_experiencia" class="form-control" rows="3"></textarea>                                                
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label>Ãreas</label>
                                                                <select id="area_perfil" class="form-control validacion_general" name="area_perfil[]" multiple="multiple">                                                                                                                        
                                                                </select>
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>
                                                        <div class="col-lg-6">
                                                            <div class="form-group">
                                                                <label>Â¿El jurado debe residir en BogotÃ¡?</label><br/>
                                                                <select id='reside_bogota' name="reside_bogota" class="form-control validacion_general" tabindex="1">                                                    
                                                                    <option value="">:: Seleccionar ::</option>
                                                                    <option value="true">SÃ­</option>
                                                                    <option value="false">No</option>
                                                                </select>                                                                
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-12" style="text-align: right">                                                        
                                                            <input type="hidden" name="tipo_participante" value="4" />
                                                            <input type="hidden" id="id_cpj" name="id" />
                                                            <button type="submit" class="btn btn-default">Guardar</button>
                                                        </div>
                                                    </div>
                                                    <br/>
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div class="panel panel-default">
                                                                <div class="panel-body">
                                                                    <div class="table-responsive">
                                                                        <table class="table">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>Jurado NÂ°</th>
                                                                                    <th>DescripciÃ³n del perfil</th>                                                                                    
                                                                                    <th>Â¿Activo?</th>
                                                                                    <th>Acciones</th>                                                                                    
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody id="tbody_perfiles_jurados">
                                                                                                                                                               
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                    <!-- /.table-responsive -->
                                                                </div>
                                                                <!-- /.panel-body -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="modal fade" id="perfiles_participantes_modal">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <!-- cabecera del diÃ¡logo -->
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                <h4 class="modal-title">Perfiles de los participantes</h4>                                                    
                                            </div>

                                            <!-- cuerpo del diÃ¡logo -->
                                            <div class="modal-body" style="height: 450px; overflow-y: auto;">
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div class="form-group">
                                                                <label>Tipo de participante</label><br/>
                                                                <span id="tipo_participante_cp"></span>
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>                                                                                                                                                                                                                                                                                                                        
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div class="form-group">
                                                                <label>DescripciÃ³n</label>
                                                                <textarea id="descripcion_cp" name="descripcion_cp" class="form-control textarea_html" rows="3"></textarea>
                                                            </div>                                                                                                                                                                                                                                                                                                        
                                                        </div>                                                                                                                                                   
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-12" style="text-align: right">                                                        
                                                            <input type="hidden" id="id_cp" name="id_cp" />
                                                            <button id="guardar_cp" type="submit" class="btn btn-default">Guardar</button>
                                                        </div>
                                                    </div>
                                                    <br/>
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div class="panel panel-default">
                                                                <div class="panel-body">
                                                                    <div class="table-responsive">
                                                                        <table class="table">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>Tipo de participante</th>                                                                                                                                                                        
                                                                                    <th>Â¿Activo?</th>
                                                                                    <th>Acciones</th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody id="tbody_tipos_participantes">
                                                                                                                                                                
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                    <!-- /.table-responsive -->
                                                                </div>
                                                                <!-- /.panel-body -->
                                                            </div>
                                                        </div>
                                                    </div>                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- /.row (nested) -->
                            </div>
                            <!-- /.panel-body -->
                        </div>
                        <!-- /.panel -->
                    </div>
                    <!-- /.col-lg-12 -->
                </div>
                <!-- /.row -->
            </div>
            <!-- /#page-wrapper -->

        </div>
        <!-- /#wrapper -->

        <!-- jQuery -->
        <script src="../../vendor/jquery/jquery.min.js"></script>

        <!-- Bootstrap Core JavaScript -->
        <script src="../../vendor/bootstrap/js/bootstrap.min.js"></script>

        <!-- Metis Menu Plugin JavaScript -->
        <script src="../../vendor/metisMenu/metisMenu.min.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="../../dist/js/sb-admin-2.js"></script>

        <!-- validator bootstrap -->
        <script src='../../dist/libraries/bootstrap-validator/bootstrapValidator.min.js'></script>        
        <script src='../../dist/libraries/bootstrap-validator/language/es_ES.js'></script>

        <!-- Bootstrap Notify-->
        <script src="../../dist/libraries/bootstrap-notify-3.1.3/bootstrap-notify.min.js" type="text/javascript"></script>

        <!-- funcionalidades principales -->
        <script src='../../dist/js/main.js'></script>
        <script src='../../dist/js/jquery.loadJSON.js'></script>
        <script src='../../dist/js/verificar_token.js'></script>

        <!-- Text area editor html -->
        <script type="text/javascript" src="../../dist/libraries/jQuery-TE_v.1.4.0/jquery-te-1.4.0.min.js" charset="utf-8"></script>
        <script>
                            $(document).ready(function () {

                                //Verifico si el token exite en el cliente y verifico que el token este activo en el servidor                
                                var token_actual = getLocalStorage(name_local_storage);

                                //Verifico si el token esta vacio, para enviarlo a que ingrese de nuevo
                                if ($.isEmptyObject(token_actual)) {
                                    location.href = '../../index.html?msg=Su sesiÃ³n ha expirado, por favor vuelva a ingresar.&msg_tipo=danger';
                                } else
                                {
                                    permiso_lectura(token_actual, "Convocatorias");

                                    $('#form_validator').attr('action', url_pv + 'Convocatorias/new');
                                    
                                    //Establesco los text area html
                                    $('.textarea_html').jqte();  
                                    
                                    //Limpio el formulario de los perfiles de los participantes
                                    $('#perfiles_participantes_modal').on('hidden.bs.modal', function () {
                                        $("#id_cp").attr('value','');
                                        $("#descripcion_cp").jqteVal('');
                                        $("#tipo_participante_cp").html('');
                                    })
                                    
                                    //Limpio el formulario de los perfiles de los jurados
                                    $('#perfiles_jurados_modal').on('hidden.bs.modal', function () {
                                        $("#id_cpj").attr('value','');
                                        $("#perfiles_jurados_modal select option:selected").removeAttr("selected");
                                        $("#perfiles_jurados_modal select option:selected").prop("selected", false);
                                        $("#perfiles_jurados_modal input[type=text] , form textarea").each(function() { this.value = '' });
                                    })
                                    
                                    //guardar registro de convocatoria perfil participante
                                    $("#guardar_cp").click(function () {
                                        if ($("#id_cp").val() != "") {
                                            //Realizo la peticion con el fin de editar el registro del perfil de la convocatoria
                                            $.ajax({
                                                type: 'PUT',
                                                url: url_pv + 'Convocatoriasparticipantes/edit/' + $("#id_cp").attr('value'),
                                                data: "descripcion_perfil="+ $("#descripcion_cp").val() + "&modulo=Convocatorias&token=" + token_actual.token
                                            }).done(function (result) {
                                                if (result == 'error')
                                                {
                                                    notify("danger", "ok", "Convocatorias:", "Se registro un error, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                                } else
                                                {
                                                    if (result == 'acceso_denegado')
                                                    {
                                                        notify("danger", "remove", "Usuario:", "No tiene permisos para editar informaciÃ³n.");
                                                    } else
                                                    {
                                                        if (isNaN(result))
                                                        {
                                                            notify("danger", "ok", "Convocatorias:", "Se registro un error, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                                        } else
                                                        {
                                                            notify("info", "ok", "Convocatorias:", "Se edito el perfil de participante con Ã©xito.");
                                                            $("#id_cp").attr('value','');
                                                            $("#descripcion_cp").jqteVal('');
                                                            $("#tipo_participante_cp").html('');
                                                            cargar_tabla_perfiles_participante(token_actual);
                                                        }
                                                    }
                                                }
                                            });
                                        }
                                        else
                                        {
                                            notify("danger", "ok", "Convocatorias:", "No ha seleccionado ningun perfil del participante");
                                        }                                                                                                                        
                                    });
                                    
                                    //Verifico si tiene permisos para cambiar el estado de la convocatoria
                                    $("#estado").on('focus', function () {
                                        previous = this.value;
                                    }).on('change', function () {
                                        $.ajax({
                                            type: 'GET',
                                            data: {"token": token_actual.token,"estado":$(this).val()},
                                            url: url_pv + 'Convocatorias/verificar_estado'
                                        }).done(function (data) {
                                            if (data == 'error_metodo')
                                            {
                                                notify("danger", "ok", "Convocatorias:", "Se registro un error en el mÃ©todo, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                            } else
                                            {
                                                if (data == 'error')
                                                {
                                                    notify("danger", "ok", "Convocatorias:", "El usuario no se encuentra registrado, por favor registrarse");
                                                } 
                                                else
                                                {
                                                    //Verifico si tiene permiso de lo contratio lo devuelvo al estado actual
                                                    if (data=="null")
                                                    {
                                                        $("#estado").val(previous);  
                                                        notify("danger", "ok", "Convocatorias:", "No cuenta con permisos para cambiar el estado de la convocatoria");
                                                    }                                                                                                         
                                                }
                                            }
                                        });
                                        
                                    });
                                    
                                    //Cargar modalidades dependiendo el programa
                                    $('#programa').on('change', function () {
                                        var programa = $(this).val();
                                        $('#modalidad').find('option').remove();
                                        $.ajax({
                                            type: 'GET',
                                            data: {"token": token_actual.token, "programa": programa},
                                            url: url_pv + 'Modalidades/select'
                                        }).done(function (data) {
                                            if (data == 'error_metodo')
                                            {
                                                notify("danger", "ok", "Usuarios:", "Se registro un error en el mÃ©todo, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                            } else
                                            {
                                                if (data == 'error')
                                                {
                                                    notify("danger", "ok", "Usuarios:", "El usuario no se encuentra registrado, por favor registrarse");
                                                } else
                                                {
                                                    var json = JSON.parse(data);
                                                    $("#modalidad").append('<option value="">:: Seleccionar ::</option>');
                                                    if (json.length > 0) {
                                                        $.each(json, function (key, value) {
                                                            $("#modalidad").append('<option value="' + value.id + '">' + value.nombre + '</option>');
                                                        });
                                                    }
                                                }
                                            }
                                        });
                                    });
                                    
                                    //Cargar Upz y Barrios
                                    $('#localidad').on('change', function () {
                                        var localidad = $(this).val();
                                        $('#upz').find('option').remove();
                                        $('#barrio').find('option').remove();
                                        $.ajax({
                                            type: 'GET',
                                            data: {"token": token_actual.token, "localidad": localidad},
                                            url: url_pv + 'Upzs/select'
                                        }).done(function (data) {
                                            if (data == 'error_metodo')
                                            {
                                                notify("danger", "ok", "Usuarios:", "Se registro un error en el mÃ©todo, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                            } else
                                            {
                                                if (data == 'error')
                                                {
                                                    notify("danger", "ok", "Usuarios:", "El usuario no se encuentra registrado, por favor registrarse");
                                                } else
                                                {
                                                    var json = JSON.parse(data);
                                                    $("#upz").append('<option value="">:: Seleccionar ::</option>');
                                                    if (json.length > 0) {
                                                        $.each(json, function (key, value) {
                                                            $("#upz").append('<option value="' + value.id + '">' + value.nombre + '</option>');
                                                        });
                                                    }
                                                }
                                            }
                                        });
                                        $.ajax({
                                            type: 'GET',
                                            data: {"token": token_actual.token, "localidad": localidad},
                                            url: url_pv + 'Barrios/select'
                                        }).done(function (data) {
                                            if (data == 'error_metodo')
                                            {
                                                notify("danger", "ok", "Usuarios:", "Se registro un error en el mÃ©todo, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                            } else
                                            {
                                                if (data == 'error')
                                                {
                                                    notify("danger", "ok", "Usuarios:", "El usuario no se encuentra registrado, por favor registrarse");
                                                } else
                                                {
                                                    var json = JSON.parse(data);
                                                    $("#barrio").append('<option value="">:: Seleccionar ::</option>');
                                                    if (json.length > 0) {
                                                        $.each(json, function (key, value) {
                                                            $("#barrio").append('<option value="' + value.id + '">' + value.nombre + '</option>');
                                                        });
                                                    }
                                                }
                                            }
                                        });
                                    });

                                    //Cargar Barrios
                                    $('#upz').on('change', function () {
                                        var upz = $(this).val();
                                        var localidad = $("#localidad").val();
                                        $('#barrio').find('option').remove();
                                        $.ajax({
                                            type: 'GET',
                                            data: {"token": token_actual.token, "localidad": localidad, "upz": upz},
                                            url: url_pv + 'Barrios/select'
                                        }).done(function (data) {
                                            if (data == 'error_metodo')
                                            {
                                                notify("danger", "ok", "Usuarios:", "Se registro un error en el mÃ©todo, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                            } else
                                            {
                                                if (data == 'error')
                                                {
                                                    notify("danger", "ok", "Usuarios:", "El usuario no se encuentra registrado, por favor registrarse");
                                                } else
                                                {
                                                    var json = JSON.parse(data);
                                                    $("#barrio").append('<option value="">:: Seleccionar ::</option>');
                                                    if (json.length > 0) {
                                                        $.each(json, function (key, value) {
                                                            $("#barrio").append('<option value="' + value.id + '">' + value.nombre + '</option>');
                                                        });
                                                    }
                                                }
                                            }
                                        });
                                    });

                                    //Verifico si es local
                                    $('#cobertura').on('change', function () {
                                        if ($(this).val() == 1)
                                        {
                                            $(".class_descripcion_ejecucion").removeAttr("disabled");
                                        } else
                                        {
                                            $(".class_descripcion_ejecucion").attr("disabled", "disabled");
                                            $('#localidad').val("");
                                            $('#upz').val("");
                                            $('#barrio').val("");
                                            $('#descripcion_ejecucion').val("");
                                        }
                                    });

                                    //valido si tiene categorias
                                    $("input[name='tiene_categorias']").click(function () {
                                        if ($(this).val() == "true")
                                        {
                                            $(".tiene_categorias").removeAttr("disabled");
                                        } else
                                        {
                                            $(".tiene_categorias").attr("disabled", "disabled");
                                            $("input[name='diferentes_categorias']").prop('checked', true);
                                            $("input[name='mismos_jurados_categorias']").prop('checked', true);
                                        }
                                    });
                                    
                                    //Valido si tiene convenio
                                    $("input[name='convenio']").click(function () {
                                        if ($(this).val() == "true")
                                        {
                                            $(".class_convenio").removeAttr("disabled");
                                        } 
                                        else
                                        {
                                            $(".class_convenio").attr("disabled", "disabled");
                                            $('#tipo_convenio').val("");
                                            $("input[name='convenio_instituciones']").val("");
                                        }
                                    });
                                    //Valido si tiene bolsa concursable                                    
                                    $('#tipo_estimulo').on('change', function () {
                                        if ($(this).val() == 2 || $(this).val() == 3)
                                        {
                                            $(".class_tipo_estimulo").removeAttr("disabled");
                                        } else
                                        {
                                            $(".class_tipo_estimulo").attr("disabled", "disabled");                                                                                        
                                        }
                                    });
                                    //Valido si tiene bolsa concursable
                                    $("input[name='bolsa_concursable']").click(function () {
                                        if ($(this).val() == "true")
                                        {
                                            $(".class_bolsa_concursable").removeAttr("disabled");
                                            $("input[name='numero_estimulos']").attr("disabled", "disabled");                                            
                                            $("input[name='numero_estimulos']").val("");                                            
                                        } else
                                        {
                                            $("input[name='numero_estimulos']").removeAttr("disabled");
                                            $(".class_bolsa_concursable").attr("disabled", "disabled");                                            
                                            $("#descripcion_bolsa").val("");
                                        }
                                    });

                                    //Realizo la peticion para cargar el formulario
                                    $.ajax({
                                        type: 'GET',
                                        data: {"token": token_actual.token, "id": $("#id").attr('value')},
                                        url: url_pv + 'Convocatorias/search/'
                                    }).done(function (data) {
                                        if (data == 'error_metodo')
                                        {
                                            notify("danger", "ok", "Convocatorias:", "Se registro un error en el mÃ©todo, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                        } else
                                        {
                                            if (data == 'error')
                                            {
                                                notify("danger", "ok", "Convocatorias:", "El convocatoria no se encuentra registrado, por favor registrarse");
                                            } else
                                            {
                                                var json = JSON.parse(data);
                                                
                                                //Verifico si es cobertura local
                                                if(json.convocatoria.cobertura==1)
                                                {
                                                    $(".class_descripcion_ejecucion").removeAttr("disabled");
                                                    
                                                    //Cargos el select de localidades
                                                    $('#localidad').find('option').remove();
                                                    $("#localidad").append('<option value="">:: Seleccionar ::</option>');
                                                    if (json.localidades.length > 0) {
                                                        $.each(json.localidades, function (key, localidad) {
                                                            var selected = '';
                                                            if(localidad.id == json.convocatoria.localidad)
                                                            {
                                                                selected = 'selected="selected"';
                                                            }
                                                            $("#localidad").append('<option value="' + localidad.id + '" '+selected+' >' + localidad.nombre + '</option>');
                                                        });
                                                    }
                                                    
                                                    //Cargos el select de upzs
                                                    $('#upz').find('option').remove();
                                                    $("#upz").append('<option value="">:: Seleccionar ::</option>');
                                                    if (json.upzs.length > 0) {
                                                        $.each(json.upzs, function (key, upz) {
                                                            var selected = '';
                                                            if(upz.id == json.convocatoria.upz)
                                                            {
                                                                selected = 'selected="selected"';
                                                            }
                                                            $("#upz").append('<option value="' + upz.id + '" '+selected+' >' + upz.nombre + '</option>');
                                                        });
                                                    }
                                                    
                                                    //Cargo los select de barrios
                                                    $('#barrio').find('option').remove();
                                                    $("#barrio").append('<option value="">:: Seleccionar ::</option>');
                                                    if (json.barrios.length > 0) {
                                                        $.each(json.barrios, function (key, barrio) {
                                                            var selected = '';
                                                            if(barrio.id == json.convocatoria.barrio)
                                                            {
                                                                selected = 'selected="selected"';
                                                            }
                                                            $("#barrio").append('<option value="' + barrio.id + '" '+selected+' >' + barrio.nombre + '</option>');
                                                        });
                                                    }
                                                    
                                                }
                                                
                                                //Verifico si es bolsa concursable
                                                if (json.convocatoria.bolsa_concursable == true)
                                                {
                                                    $(".class_bolsa_concursable").removeAttr("disabled");
                                                    $("input[name='numero_estimulos']").attr("disabled", "disabled");                                                                                                
                                                } 
                                                else
                                                {
                                                    $(".class_bolsa_concursable").attr("disabled", "disabled");                                            
                                                    $("input[name='numero_estimulos']").removeAttr("disabled");                                                    
                                                }
                                                                                                
                                                //Cargo el select de programas
                                                $('#programa').find('option').remove();
                                                $("#programa").append('<option value="">:: Seleccionar ::</option>');
                                                if (json.programas.length > 0) {
                                                    $.each(json.programas, function (key, programa) {
                                                        var selected = '';
                                                        if (programa.id == json.convocatoria.programa)
                                                        {
                                                            selected = 'selected="selected"';
                                                        }
                                                        $("#programa").append('<option value="' + programa.id + '" ' + selected + ' >' + programa.nombre + '</option>');
                                                    });
                                                }
                                                //Cargo los checks de quienes pueden participar
                                                $('#quienes_pueden_participar').html("<label>Â¿QuiÃ©n puede participar?</label><br/>");
                                                if (json.tipos_participantes.length > 0) {
                                                    $.each(json.tipos_participantes, function (key, tipo_participante) {
                                                        var checked = '';                                                        
                                                        if (tipo_participante.active == true)
                                                        {
                                                            checked = 'checked="checked"';
                                                        }                                                        
                                                        
                                                        $("#quienes_pueden_participar").append('<label class="checkbox-inline"><input class="tipo_participante tipo_participante_' + tipo_participante.id + '" value="' + tipo_participante.id + '" type="checkbox" '+checked+'>' + tipo_participante.nombre + '</label>');
                                                        
                                                        if (tipo_participante.descripcion == null)
                                                        {
                                                            tipo_participante.descripcion  = '';
                                                        }
                                                        
                                                        $("#tbody_tipos_participantes").append('<tr><td>' + tipo_participante.nombre + '</td><td><input class="activo_participante_'+tipo_participante.id+'" onclick="activar_participante('+tipo_participante.id+','+$("#id").attr('value')+',\''+token_actual.token+'\')" type="checkbox" '+checked+'></td><td><button type="button" class="btn btn-warning btn-update-convocatoria-participante" lang="'+JSON.stringify(tipo_participante).replace(/\"/g,"&quot;")+'"><span class="glyphicon glyphicon-edit"></span></button></td></tr>');
                                                    });
                                                }
                                                
                                                //Cargo los perfiles de los jurados en esta convocatoria
                                                if (json.perfiles_jurados.length > 0) {
                                                    $.each(json.perfiles_jurados, function (key, perfil_jurado) {
                                                        var checked = '';
                                                        if (perfil_jurado.active == true)
                                                        {
                                                            checked="checked='checked'";
                                                        }                                                                                                                                                                                                                                
                                                        $("#tbody_perfiles_jurados").append('<tr><td>' + perfil_jurado.orden + '</td><td>' + perfil_jurado.descripcion_perfil + '</td><td><input onclick="activar_perfil_jurado('+perfil_jurado.id+','+$("#id").attr('value')+',\''+token_actual.token+'\')" type="checkbox" '+checked+'></td><td><button type="button" class="btn btn-warning btn-update-convocatoria-jurados-'+perfil_jurado.id+'" onclick="cargar_perfil_jurado('+perfil_jurado.id+')" lang="'+JSON.stringify(perfil_jurado).replace(/\"/g,"&quot;")+'"><span class="glyphicon glyphicon-edit"></span></button></td></tr>');
                                                    });
                                                }
                                                
                                                //para habilitar formulario de convocatoria participante
                                                $(".btn-update-convocatoria-participante").click(function () {
                                                    var json_update = JSON.parse($(this).attr("lang"));
                                                    $("#id_cp").val(json_update.id_cp);
                                                    $("#tipo_participante_cp").html(json_update.nombre);
                                                    $("#descripcion_cp").jqteVal(json_update.descripcion_cp);
                                                });
                                                
                                                //Creamos los participantes en la convocatoria
                                                $('.tipo_participante').click(function () {
                                                    var tipo_participante = $(this).val();
                                                    if( $(this).prop('checked') ) {                                                        
                                                        //Se realiza la peticion con el fin de guardar el registro de la convocatoria participante
                                                        $.ajax({
                                                            type: 'POST',
                                                            url: url_pv + 'Convocatoriasparticipantes/new/',
                                                            data: "convocatoria="+$("#id").val()+"&tipo_participante="+$(this).val()+"&modulo=Convocatorias&token=" + token_actual.token
                                                        }).done(function (result) {

                                                            if (result == 'error')
                                                            {
                                                                notify("danger", "ok", "Convocatorias:", "Se registro un error, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");                                                                
                                                            } else
                                                            {
                                                                if (result == 'acceso_denegado')
                                                                {
                                                                    notify("danger", "remove", "Convocatorias:", "No tiene permisos para editar informaciÃ³n.");
                                                                } else
                                                                {
                                                                    if (isNaN(result)) {
                                                                        notify("danger", "ok", "Convocatorias:", "Se registro un error, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                                                    } else
                                                                    {
                                                                        notify("success", "ok", "Convocatorias:", "Se creÃ³ el perfil del participante con Ã©xito.");
                                                                        $(".activo_participante_"+tipo_participante).attr('checked', true);
                                                                        $(".activo_participante_"+tipo_participante).prop( "checked", true );
                                                                    }
                                                                }
                                                            }

                                                        });
                                                    }
                                                    else
                                                    {
                                                        //Se realiza la peticion para desactivar la convocatoria participante
                                                        $.ajax({
                                                            type: 'DELETE',
                                                            data: {"token": token_actual.token,"modulo":"Convocatorias","convocatoria":$("#id").val(),"tipo_participante":$(this).val()},
                                                            url: url_pv+'Convocatoriasparticipantes/delete'                  
                                                        }).done(function (data) {    
                                                            if (data == 'ok')
                                                            {
                                                                notify("info", "ok", "Convocatorias:", "Se elimino el perfil del participante con Ã©xito.");                                                                
                                                                $(".activo_participante_"+tipo_participante).attr('checked', false);
                                                                $(".activo_participante_"+tipo_participante).prop( "checked", false );
                                                            }
                                                            else
                                                            {
                                                                if (data == 'acceso_denegado')
                                                                {
                                                                    notify("danger", "remove", "Convocatorias:", "Acceso denegado.");
                                                                }
                                                                else
                                                                {
                                                                    notify("danger", "ok", "Convocatorias:", "Se registro un error en el mÃ©todo, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                                                }
                                                            }
                                                        });
                                                    }
                                                });
                                                
                                                //Cargo el select de modalidades
                                                $('#modalidad').find('option').remove();
                                                $("#modalidad").append('<option value="">:: Seleccionar ::</option>');
                                                if (json.modalidades.length > 0) {
                                                    $.each(json.modalidades, function (key, modalidad) {
                                                        var selected = '';
                                                        if (modalidad.id == json.convocatoria.modalidad)
                                                        {
                                                            selected = 'selected="selected"';
                                                        }
                                                        $("#modalidad").append('<option value="' + modalidad.id + '" ' + selected + ' >' + modalidad.nombre + '</option>');
                                                    });
                                                }
                                                //Cargo el select de coberturas
                                                $('#cobertura').find('option').remove();
                                                $("#cobertura").append('<option value="">:: Seleccionar ::</option>');
                                                if (json.coberturas.length > 0) {
                                                    $.each(json.coberturas, function (key, cobertura) {
                                                        var selected = '';
                                                        if (cobertura.id == json.convocatoria.cobertura)
                                                        {
                                                            selected = 'selected="selected"';
                                                        }
                                                        $("#cobertura").append('<option value="' + cobertura.id + '" ' + selected + ' >' + cobertura.nombre + '</option>');
                                                    });
                                                }

                                                //Cargo el select de localidades
                                                $('#localidad').find('option').remove();
                                                $("#localidad").append('<option value="">:: Seleccionar ::</option>');
                                                if (json.localidades.length > 0) {
                                                    $.each(json.localidades, function (key, localidad) {
                                                        var selected = '';
                                                        if (localidad.id == json.convocatoria.localidad)
                                                        {
                                                            selected = 'selected="selected"';
                                                        }
                                                        $("#localidad").append('<option value="' + localidad.id + '" ' + selected + ' >' + localidad.nombre + '</option>');
                                                    });
                                                }

                                                //Cargo el select de enfoques
                                                $('#enfoque').find('option').remove();
                                                $("#enfoque").append('<option value="">:: Seleccionar ::</option>');
                                                if (json.enfoques.length > 0) {
                                                    $.each(json.enfoques, function (key, enfoque) {
                                                        var selected = '';
                                                        if (enfoque.id == json.convocatoria.enfoque)
                                                        {
                                                            selected = 'selected="selected"';
                                                        }
                                                        $("#enfoque").append('<option value="' + enfoque.id + '" ' + selected + ' >' + enfoque.nombre + '</option>');
                                                    });
                                                }

                                                //Cargo el select de lineas estrategicas
                                                $('#linea_estrategica').find('option').remove();
                                                $("#linea_estrategica").append('<option value="">:: Seleccionar ::</option>');
                                                if (json.lineas_estrategicas.length > 0) {
                                                    $.each(json.lineas_estrategicas, function (key, linea_estrategica) {
                                                        var selected = '';
                                                        if (linea_estrategica.id == json.convocatoria.linea_estrategica)
                                                        {
                                                            selected = 'selected="selected"';
                                                        }
                                                        $("#linea_estrategica").append('<option value="' + linea_estrategica.id + '" ' + selected + ' >' + linea_estrategica.nombre + '</option>');
                                                    });
                                                }
                                                //Cargo el select de areas
                                                $('#area').find('option').remove();
                                                $("#area").append('<option value="">:: Seleccionar ::</option>');
                                                if (json.areas.length > 0) {
                                                    $.each(json.areas, function (key, area) {
                                                        var selected = '';
                                                        if (area.id == json.convocatoria.area)
                                                        {
                                                            selected = 'selected="selected"';
                                                        }
                                                        $("#area").append('<option value="' + area.id + '" ' + selected + ' >' + area.nombre + '</option>');
                                                        $("#area_perfil").append('<option value="' + area.nombre + '" >' + area.nombre + '</option>');
                                                    });
                                                }
                                                //Cargo el select de cantidad de jurados
                                                $('#cantidad_perfil_jurado').find('option').remove();
                                                $("#cantidad_perfil_jurado").append('<option value="">:: Seleccionar ::</option>');
                                                if (json.cantidad_perfil_jurados.length > 0) {
                                                    $.each(json.cantidad_perfil_jurados, function (key, cantidad_perfil_jurado) {
                                                        var selected = '';
                                                        if (cantidad_perfil_jurado == json.convocatoria.cantidad_perfil_jurado)
                                                        {
                                                            selected = 'selected="selected"';
                                                        }
                                                        $("#cantidad_perfil_jurado").append('<option value="' + cantidad_perfil_jurado + '" ' + selected + ' >' + cantidad_perfil_jurado + '</option>');
                                                        $("#orden_perfil_jurado").append('<option value="' + cantidad_perfil_jurado + '" >' + cantidad_perfil_jurado + '</option>');
                                                    });
                                                }
                                                //Cargo el select de tipos de convenios
                                                $('#tipo_convenio').find('option').remove();
                                                $("#tipo_convenio").append('<option value="">:: Seleccionar ::</option>');
                                                if (json.tipos_convenios.length > 0) {
                                                    $.each(json.tipos_convenios, function (key, tipo_convenio) {
                                                        var selected = '';
                                                        if (tipo_convenio.id == json.convocatoria.tipo_convenio)
                                                        {
                                                            selected = 'selected="selected"';
                                                        }
                                                        $("#tipo_convenio").append('<option value="' + tipo_convenio.id + '" ' + selected + ' >' + tipo_convenio.nombre + '</option>');
                                                    });
                                                }

                                                //Cargo el select de tipos de estimulos
                                                $('#tipo_estimulo').find('option').remove();
                                                $("#tipo_estimulo").append('<option value="">:: Seleccionar ::</option>');
                                                if (json.tipos_estimulos.length > 0) {
                                                    $.each(json.tipos_estimulos, function (key, tipo_estimulo) {
                                                        var selected = '';
                                                        if (tipo_estimulo.id == json.convocatoria.tipo_estimulo)
                                                        {
                                                            selected = 'selected="selected"';
                                                        }
                                                        $("#tipo_estimulo").append('<option value="' + tipo_estimulo.id + '" ' + selected + ' >' + tipo_estimulo.nombre + '</option>');
                                                    });
                                                }
                                                
                                                //Cargo el select de entidades
                                                $('#entidad').find('option').remove();
                                                $("#entidad").append('<option value="">:: Seleccionar ::</option>');
                                                if (json.entidades.length > 0) {
                                                    $.each(json.entidades, function (key, entidad) {
                                                        var selected = '';
                                                        if (entidad.id == json.convocatoria.entidad)
                                                        {
                                                            selected = 'selected="selected"';
                                                        }
                                                        $("#entidad").append('<option value="' + entidad.id + '" ' + selected + ' >' + entidad.nombre + '</option>');
                                                    });
                                                }
                                                
                                                //Cargo el select de areas de conocimientos
                                                $('#area_conocimiento').find('option').remove();
                                                if (json.areas_conocimientos.length > 0) {
                                                    $.each(json.areas_conocimientos, function (key, area_conocimiento) {
                                                        $("#area_conocimiento").append('<option value="' + area_conocimiento.nombre + '" >' + area_conocimiento.nombre + '</option>');
                                                    });
                                                }
                                                
                                                //Cargo el select de niveles educativos
                                                $('#nivel_educativo').find('option').remove();
                                                if (json.niveles_educativos.length > 0) {
                                                    $.each(json.niveles_educativos, function (key, nivel_educativo) {
                                                        $("#nivel_educativo").append('<option value="' + nivel_educativo.nombre + '" >' + nivel_educativo.nombre + '</option>');
                                                    });
                                                }
                                                
                                                //Cargo el select de entidades
                                                $('#estado').find('option').remove();
                                                $("#estado").append('<option value="">:: Seleccionar ::</option>');
                                                if (json.estados.length > 0) {
                                                    $.each(json.estados, function (key, estado) {
                                                        var selected = '';
                                                        if (estado.id == json.convocatoria.estado)
                                                        {
                                                            selected = 'selected="selected"';
                                                        }
                                                        $("#estado").append('<option value="' + estado.id + '" ' + selected + ' >' + estado.nombre + '</option>');
                                                    });
                                                }
                                                
                                                //Cargo el select de anios
                                                $('#anio').find('option').remove();
                                                $("#anio").append('<option value="">:: Seleccionar ::</option>');
                                                if (json.anios.length > 0) {
                                                    $.each(json.anios, function (key, anio) {
                                                        $("#anio").append('<option value="' + anio + '"  >' + anio + '</option>');
                                                    });
                                                }
                                                
                                                $('#form_validator').loadJSON(json.convocatoria);
                                                
                                                //Se realiza este set en cada text area html debido a que jste no es compatible con load json
                                                $("#descripcion").jqteVal(json.convocatoria.descripcion);
                                                $("#justificacion").jqteVal(json.convocatoria.justificacion);
                                                $("#objeto").jqteVal(json.convocatoria.objeto);
                                                $("#no_pueden_participar").jqteVal(json.convocatoria.no_pueden_participar);
                                                $("#derechos_ganadores").jqteVal(json.convocatoria.derechos_ganadores);
                                                $("#deberes_ganadores").jqteVal(json.convocatoria.deberes_ganadores);

                                            }
                                        }
                                    });

                                    //Verifico si selecciono una convocatoria
                                    if ($('#id').val().length > 0) {
                                        $('.menu_convocatoria').css("display", "block");
                                    }

                                    validator_form(token_actual);
                                }
                            });

                            //Funcion para activar o desactivar participante
                            function activar_participante(tipo_participante,convocatoria,token_actual) {
                                //Se realiza la peticion para desactivar la convocatoria participante
                                $.ajax({
                                    type: 'DELETE',
                                    data: {"token": token_actual,"modulo":"Convocatorias","convocatoria":convocatoria,"tipo_participante":tipo_participante},
                                    url: url_pv+'Convocatoriasparticipantes/delete'                  
                                }).done(function (data) {  
                                    if (data == 'Si' || data == 'No')
                                    {
                                        if (data == 'Si')
                                        {
                                            notify("info", "ok", "Convocatorias:", "Se activo el perfil del participante con Ã©xito.");                                        
                                            $(".tipo_participante_"+tipo_participante).attr('checked', true);
                                            $(".tipo_participante_"+tipo_participante).prop( "checked", true );
                                        }
                                        else
                                        {
                                            notify("info", "ok", "Convocatorias:", "Se elimino el perfil del participante con Ã©xito.");                                        
                                            $(".tipo_participante_"+tipo_participante).attr('checked', false);
                                            $(".tipo_participante_"+tipo_participante).prop( "checked", false );
                                        }  
                                    }
                                    else
                                    {
                                        if (data == 'acceso_denegado')
                                        {
                                            notify("danger", "remove", "Convocatorias:", "Acceso denegado.");
                                        }
                                        else
                                        {
                                            notify("danger", "ok", "Convocatorias:", "Se registro un error en el mÃ©todo, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");                                                                                        
                                        }
                                    }
                                });                                                                
                            }
                            
                            //Funcion para activar o desactivar el perfil de los jurados
                            function activar_perfil_jurado(id,convocatoria,token_actual) {
                                //Se realiza la peticion para desactivar la convocatoria participante
                                $.ajax({
                                    type: 'DELETE',
                                    data: {"token": token_actual,"modulo":"Convocatorias","convocatoria":convocatoria},
                                    url: url_pv+'Convocatoriasparticipantes/delete_perfil_jurado/' + id                 
                                }).done(function (data) {    
                                    if (data == 'Si' || data == 'No')
                                    {
                                        if (data == 'Si')
                                        {
                                            notify("info", "ok", "Convocatorias:", "Se activo el perfil del jurado con Ã©xito.");                                        
                                        }
                                        else
                                        {
                                            notify("info", "ok", "Convocatorias:", "Se elimino el perfil del jurado con Ã©xito.");                                        
                                        }                                        
                                    }
                                    else
                                    {
                                        if (data == 'acceso_denegado')
                                        {
                                            notify("danger", "remove", "Convocatorias:", "Acceso denegado.");
                                        }
                                        else
                                        {
                                            notify("danger", "ok", "Convocatorias:", "Se registro un error en el mÃ©todo, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");                                                                                        
                                        }
                                    }
                                });                                                                
                            }
                            
                            //Carga la tabla de los perfiles de los jurados
                            function cargar_tabla_perfiles_jurado(token_actual){
                                $.ajax({
                                    type: 'GET',
                                    data: {"token": token_actual.token,"convocatoria":$("#id").val(),"tipo_participante":4},
                                    url: url_pv + 'Convocatoriasparticipantes/select'
                                }).done(function (data) {
                                    if (data == 'error_metodo')
                                    {
                                        notify("danger", "ok", "Usuarios:", "Se registro un error en el mÃ©todo, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                    } else
                                    {
                                        if (data == 'error')
                                        {
                                            notify("danger", "ok", "Usuarios:", "El usuario no se encuentra registrado, por favor registrarse");
                                        } else
                                        {
                                            var json = JSON.parse(data);
                                            if (json.length > 0) {
                                                $("#tbody_perfiles_jurados").find("tr").remove();
                                                $.each(json, function (key, perfil_jurado) {                                                        
                                                    var checked = '';
                                                    if (perfil_jurado.active == true)
                                                    {
                                                        checked="checked='checked'";
                                                    }                                                                                                                                                                                                                                
                                                    $("#tbody_perfiles_jurados").append('<tr><td>' + perfil_jurado.orden + '</td><td>' + perfil_jurado.descripcion_perfil + '</td><td><input onclick="activar_perfil_jurado('+perfil_jurado.id+','+$("#id").attr('value')+',\''+token_actual.token+'\')" type="checkbox" '+checked+'></td><td><button type="button" class="btn btn-warning btn-update-convocatoria-jurados-'+perfil_jurado.id+'" onclick="cargar_perfil_jurado('+perfil_jurado.id+')" lang="'+JSON.stringify(perfil_jurado).replace(/\"/g,"&quot;")+'"><span class="glyphicon glyphicon-edit"></span></button></td></tr>');
                                                });
                                            }
                                        }
                                    }
                                });
                            }
                            
                            //Carga la tabla de los perfiles de los participantes
                            function cargar_tabla_perfiles_participante(token_actual){
                                $.ajax({
                                    type: 'GET',
                                    data: {"token": token_actual.token,"convocatoria":$("#id").val()},
                                    url: url_pv + 'Convocatoriasparticipantes/select_form_convocatoria'
                                }).done(function (data) {
                                    if (data == 'error_metodo')
                                    {
                                        notify("danger", "ok", "Usuarios:", "Se registro un error en el mÃ©todo, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                    } else
                                    {
                                        if (data == 'error')
                                        {
                                            notify("danger", "ok", "Usuarios:", "El usuario no se encuentra registrado, por favor registrarse");
                                        } else
                                        {
                                            var json = JSON.parse(data);
                                            if (json.length > 0) {
                                                $("#tbody_tipos_participantes").find("tr").remove();
                                                $.each(json, function (key, tipo_participante) {                                                        
                                                    var checked = '';
                                                    if (tipo_participante.active == true)
                                                    {
                                                        checked="checked='checked'";
                                                    }                                                                                                                                                                                                                                                                                    
                                                    $("#tbody_tipos_participantes").append('<tr><td>' + tipo_participante.nombre + '</td><td><input class="activo_participante_'+tipo_participante.id+'" onclick="activar_participante('+tipo_participante.id+','+$("#id").attr('value')+',\''+token_actual.token+'\')" type="checkbox" '+checked+'></td><td><button type="button" class="btn btn-warning btn-update-convocatoria-participante" lang="'+JSON.stringify(tipo_participante).replace(/\"/g,"&quot;")+'"><span class="glyphicon glyphicon-edit"></span></button></td></tr>');
                                                });
                                                
                                                //para habilitar formulario de convocatoria participante
                                                $(".btn-update-convocatoria-participante").click(function () {
                                                    var json_update = JSON.parse($(this).attr("lang"));
                                                    $("#id_cp").val(json_update.id_cp);
                                                    $("#tipo_participante_cp").html(json_update.nombre);
                                                    $("#descripcion_cp").jqteVal(json_update.descripcion_cp);
                                                });
                                            }
                                        }
                                    }
                                });
                            }
                            
                            //Carga el registro del perfil del jurado sobre el formulario
                            function cargar_perfil_jurado(id){
                                var json_update = JSON.parse($(".btn-update-convocatoria-jurados-"+id).attr("lang"));
                                $("#formacion_profesional option[value='"+json_update.formacion_profesional+"']").prop('selected', true);
                                $("#formacion_postgrado option[value='"+json_update.formacion_postgrado+"']").prop('selected', true);
                                $("#reside_bogota option[value='"+json_update.reside_bogota+"']").prop('selected', true);
                                $("#orden_perfil_jurado option[value='"+json_update.orden+"']").prop('selected', true);
                                
                                $("#area_conocimiento option:selected").removeAttr("selected");
                                $("#area_conocimiento option:selected").prop("selected", false);
                                $.each(JSON.parse(json_update.area_conocimiento), function(i,e){
                                    $("#area_conocimiento option[value='" + e + "']").prop("selected", true);
                                });

                                $("#area_perfil option:selected").removeAttr("selected");                                                    
                                $("#area_perfil option:selected").prop("selected", false);
                                $.each(JSON.parse(json_update.area_perfil), function(i,e){
                                    $("#area_perfil option[value='" + e + "']").prop("selected", true);
                                });

                                $("#nivel_educativo option:selected").removeAttr("selected");
                                $("#nivel_educativo option:selected").prop("selected", false);
                                $.each(JSON.parse(json_update.nivel_educativo), function(i,e){
                                    $("#nivel_educativo option[value='" + e + "']").prop("selected", true);
                                });       

                                $("#descripcion_perfil").val(json_update.descripcion_perfil);
                                $("#campo_experiencia").val(json_update.campo_experiencia);                                
                                $("#id_cpj").val(json_update.id);                                
                            }
                            
                            function validator_form(token_actual) {
                                //Validar el formulario principal
                                $('.form_validator').bootstrapValidator({
                                    feedbackIcons: {
                                        valid: 'glyphicon glyphicon-ok',
                                        invalid: 'glyphicon glyphicon-remove',
                                        validating: 'glyphicon glyphicon-refresh'
                                    },
                                    fields: {
                                        entidad: {
                                            validators: {
                                                notEmpty: {message: 'La entidad es requerida'}
                                            }
                                        },
                                        programa: {
                                            validators: {
                                                notEmpty: {message: 'El tipo de programa es requerido'}
                                            }
                                        },
                                        anio: {
                                            validators: {
                                                notEmpty: {message: 'El aÃ±o es requerido'}
                                            }
                                        },                                        
                                        nombre: {
                                            validators: {
                                                notEmpty: {message: 'El nombre de la convocatoria es requerido'}
                                            }
                                        },                                        
                                        descripcion: {
                                            validators: {
                                                notEmpty: {message: 'La descripciÃ³n corta de la convocatoria es requerida'}
                                            }
                                        },                                        
                                        justificacion: {
                                            validators: {
                                                notEmpty: {message: 'La justificaciÃ³n de la convocatoria es requerida'}
                                            }
                                        },                                        
                                        modalidad: {
                                            validators: {
                                                notEmpty: {message: 'La modalidad es requerida'}
                                            }
                                        },                                        
                                        cobertura: {
                                            validators: {
                                                notEmpty: {message: 'La cobertura es requerida'}
                                            }
                                        },                                        
                                        enfoque: {
                                            validators: {
                                                notEmpty: {message: 'El enfoque es requerido'}
                                            }
                                        },                                        
                                        linea_estrategica: {
                                            validators: {
                                                notEmpty: {message: 'La lÃ­nea estratÃ©gica es requerida'}
                                            }
                                        },                                        
                                        area: {
                                            validators: {
                                                notEmpty: {message: 'El Ã¡rea es requerida'}
                                            }
                                        },                                        
                                        cantidad_perfil_jurado: {
                                            validators: {
                                                notEmpty: {message: 'La pregunta Â¿CuÃ¡ntos perfiles de jurado requiere? es requerida'}
                                            }
                                        },                                        
                                        tipo_estimulo: {
                                            validators: {
                                                notEmpty: {message: 'El tipo de estÃ­mulo es requerido'}
                                            }
                                        },                                        
                                        valor_total_estimulos: {
                                            validators: {
                                                notEmpty: {message: 'El valor total de recursos que entregarÃ¡ la convocatoria es requerido'},
                                                numeric: {message: 'Debe ingresar solo numeros'}
                                            }
                                        },                                        
                                        numero_estimulos: {
                                            validators: {                                                
                                                numeric: {message: 'Debe ingresar solo numeros'}
                                            }
                                        },                                        
                                        objeto: {
                                            validators: {
                                                notEmpty: {message: 'El objeto es requerido'}
                                            }
                                        },                                        
                                        no_pueden_participar: {
                                            validators: {
                                                notEmpty: {message: 'QuiÃ©nes no pueden participar son requeridos'}
                                            }
                                        },                                        
                                        derechos_ganadores: {
                                            validators: {
                                                notEmpty: {message: 'Los derechos especÃ­ficos de los ganadores son requeridos'}
                                            }
                                        },                                        
                                        deberes_ganadores: {
                                            validators: {
                                                notEmpty: {message: 'Los deberes especÃ­ficos de los ganadores son requeridos'}
                                            }
                                        }                                        
                                    }
                                }).on('success.form.bv', function (e) {
                                    // Prevent form submission
                                    e.preventDefault();
                                    // Get the form instance
                                    var $form = $(e.target);

                                    // Get the BootstrapValidator instance
                                    var bv = $form.data('bootstrapValidator');

                                    //Realizo la peticion con el fin de editar el registro actual
                                    $.ajax({
                                        type: 'PUT',
                                        url: url_pv + 'Convocatorias/edit/' + $("#id").attr('value'),
                                        data: $form.serialize() + "&modulo=Convocatorias&token=" + token_actual.token
                                    }).done(function (result) {
                                        if (result == 'error')
                                        {
                                            notify("danger", "ok", "Convocatorias:", "Se registro un error, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                        } else
                                        {
                                            if (result == 'acceso_denegado')
                                            {
                                                notify("danger", "remove", "Usuario:", "No tiene permisos para editar informaciÃ³n.");
                                            } else
                                            {
                                                if (isNaN(result))
                                                {
                                                    notify("danger", "ok", "Convocatorias:", "Se registro un error, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                                } else
                                                {
                                                    notify("info", "ok", "Convocatorias:", "Se edito el convocatoria con Ã©xito.");
                                                }
                                            }
                                        }
                                    });
                                    
                                    //$form.bootstrapValidator('disableSubmitButtons', false).bootstrapValidator('resetForm', true);
                                    bv.resetForm();
                                });
                                
                                //Validar el formulario principal
                                $('.form_validator_jurado').bootstrapValidator({
                                    feedbackIcons: {
                                        valid: 'glyphicon glyphicon-ok',
                                        invalid: 'glyphicon glyphicon-remove',
                                        validating: 'glyphicon glyphicon-refresh'
                                    },
                                    fields: {
                                        myClass: {
                                            selector: '.validacion_general',
                                            validators: {
                                                notEmpty: {
                                                    message: 'Este campo es requerido'
                                                }
                                            }
                                        },
                                        descripcion_perfil: {
                                            validators: {
                                                notEmpty: {message: 'El perfil del jurado es requerido'}
                                            }
                                        },                                        
                                        campo_experiencia: {
                                            validators: {
                                                notEmpty: {message: 'Los campos de experiencia son requeridos'}
                                            }
                                        }                                       
                                    }
                                }).on('success.form.bv', function (e) {
                                    // Prevent form submission
                                    e.preventDefault();
                                    // Get the form instance
                                    var $form = $(e.target);

                                    // Get the BootstrapValidator instance
                                    var bv = $form.data('bootstrapValidator');

                                    // Enviar datos del formulario para guardar
                                    if ($("#id_cpj").val() == "") {
                                        //Se realiza la peticion con el fin de guardar el registro actual
                                        $.ajax({
                                            type: 'POST',
                                            url: url_pv + 'Convocatoriasparticipantes/new/',
                                            data: $form.serialize() + "&modulo=Convocatorias&token=" + token_actual.token+"&convocatoria=" + $("#id").attr('value')+"&cantidad_perfil_jurado="+ $("#cantidad_perfil_jurado").val()
                                        }).done(function (result) {

                                            if (result == 'error')
                                            {
                                                notify("danger", "ok", "Convocatoria perfil:", "Se registro un error, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                            } else
                                            {
                                                if (result == 'acceso_denegado')
                                                {
                                                    notify("danger", "remove", "Usuario:", "No tiene permisos para editar informaciÃ³n.");
                                                } 
                                                else
                                                {
                                                    if (result == 'error_maximo_jurados')
                                                    {
                                                        notify("danger", "remove", "Convocatoria perfil:", "No puede exceder el mÃ¡ximo de perfiles como jurado para esta convocatoria.");
                                                    } 
                                                    else
                                                    {
                                                        if (isNaN(result)) {
                                                            notify("danger", "ok", "Convocatoria perfil:", "Se registro un error, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                                        } else
                                                        {
                                                            cargar_tabla_perfiles_jurado(token_actual);
                                                            notify("success", "ok", "Convocatoria perfil:", "Se creÃ³ el perfil del jurado con Ã©xito.");
                                                        }
                                                    }
                                                }
                                            }

                                        });
                                    } else {
                                        //Realizo la peticion con el fin de editar el registro actual
                                        $.ajax({
                                            type: 'PUT',
                                            url: url_pv + 'Convocatoriasparticipantes/edit/' + $("#id_cpj").attr('value'),
                                            data: $form.serialize() + "&modulo=Convocatorias&token=" + token_actual.token
                                        }).done(function (result) {
                                            if (result == 'error')
                                            {
                                                notify("danger", "ok", "Convocatoria perfil:", "Se registro un error, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                            } else
                                            {
                                                if (result == 'acceso_denegado')
                                                {
                                                    notify("danger", "remove", "Usuario:", "No tiene permisos para editar informaciÃ³n.");
                                                } else
                                                {
                                                    if (isNaN(result))
                                                    {
                                                        notify("danger", "ok", "Convocatoria perfil:", "Se registro un error, comunÃ­quese con la mesa de ayuda soporte.convocatorias@scrd.gov.co");
                                                    } else
                                                    {
                                                        cargar_tabla_perfiles_jurado(token_actual);
                                                        
                                                        notify("info", "ok", "Convocatoria perfil:", "Se edito el perfil del jurado con Ã©xito.");
                                                    }
                                                }
                                            }
                                        });
                                    }
                                    
                                    //Elimino contenido del formulario
                                    $("#id_cpj").attr("value","");                                    
                                    $form.bootstrapValidator('disableSubmitButtons', false).bootstrapValidator('resetForm', true);
                                    bv.resetForm();
                                });
                            }
        </script>
    </body>
</html>